import{r as c,fC as I,fD as je,j as d,k as U,a8 as L,e7 as He,a as ke,e as P,T as ve,h as er,ai as Xe,I as rt,f as tr,fE as nr,bA as cn,aK as At,a_ as dn,fF as rr,g as un,bc as or,cD as ir,aY as sr,b as fn,af as ar,s as lr,D as at,ak as cr,z as dr,ev as ur,a$ as fr,aq as Kt,fG as gr,B as gn}from"./strapi-Ct6oVp5e.js";import{u as be,g as X,C as qt,a as kt,A as hr,S as pr}from"./index-CJYxUf86.js";import"./groupBy-DsedKlz8.js";import"./_baseEach-gdLJUB21.js";import"./sortBy-ztfa9O0U.js";import"./_baseMap-BHu1Z2Eb.js";import"./index-4Ct4Xb-q.js";import"./index-BRVyLNfZ.js";import"./_arrayIncludesWith-BNzMLSv9.js";function vr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const ht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ie(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function It(e){return"nodeType"in e}function Y(e){var t,n;return e?Ie(e)?e:It(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ot(e){const{Document:t}=Y(e);return e instanceof t}function Ze(e){return Ie(e)?!1:e instanceof Y(e).HTMLElement}function hn(e){return e instanceof Y(e).SVGElement}function Oe(e){return e?Ie(e)?e.document:It(e)?Ot(e)?e:Ze(e)||hn(e)?e.ownerDocument:document:document:document}const ee=ht?c.useLayoutEffect:c.useEffect;function pt(e){const t=c.useRef(e);return ee(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function mr(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ke(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return ee(()=>{n.current!==e&&(n.current=e)},t),n}function Ge(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function lt(e){const t=pt(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function ct(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let Ct={};function Je(e,t){return c.useMemo(()=>{if(t)return t;const n=Ct[e]==null?0:Ct[e]+1;return Ct[e]=n,e+"-"+n},[e,t])}function pn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,s)=>{const a=Object.entries(s);for(const[l,u]of a){const g=i[l];g!=null&&(i[l]=g+e*u)}return i},{...t})}}const Ae=pn(1),dt=pn(-1);function br(e){return"clientX"in e&&"clientY"in e}function vt(e){if(!e)return!1;const{KeyboardEvent:t}=Y(e.target);return t&&e instanceof t}function yr(e){if(!e)return!1;const{TouchEvent:t}=Y(e.target);return t&&e instanceof t}function ut(e){if(yr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return br(e)?{x:e.clientX,y:e.clientY}:null}const me=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[me.Translate.toString(e),me.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Zt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xr(e){return e.matches(Zt)?e:e.querySelector(Zt)}const wr={display:"none"};function Cr(e){let{id:t,value:n}=e;return I.createElement("div",{id:t,style:wr},n)}function Dr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Rr(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const vn=c.createContext(null);function Sr(e){const t=c.useContext(vn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Er(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:i}=r;e.forEach(s=>{var a;return(a=s[o])==null?void 0:a.call(s,i)})},[e]),t]}const Tr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Mr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function jr(e){let{announcements:t=Mr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Tr}=e;const{announce:i,announcement:s}=Rr(),a=Je("DndLiveRegion"),[l,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),Sr(c.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:h}=f;t.onDragMove&&i(t.onDragMove({active:p,over:h}))},onDragOver(f){let{active:p,over:h}=f;i(t.onDragOver({active:p,over:h}))},onDragEnd(f){let{active:p,over:h}=f;i(t.onDragEnd({active:p,over:h}))},onDragCancel(f){let{active:p,over:h}=f;i(t.onDragCancel({active:p,over:h}))}}),[i,t])),!l)return null;const g=I.createElement(I.Fragment,null,I.createElement(Cr,{id:r,value:o.draggable}),I.createElement(Dr,{id:a,announcement:s}));return n?je.createPortal(g,n):g}var N;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(N||(N={}));function ft(){}function Ar(e,t){return c.useMemo(()=>({sensor:e,options:{}}),[e,t])}function kr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const te=Object.freeze({x:0,y:0});function Ir(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Or(e,t){const n=ut(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Nr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function $r(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Lr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Gt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Fr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Gt(t,t.left,t.top),i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const u=Ir(Gt(l),o);i.push({id:a,data:{droppableContainer:s,value:u}})}}return i.sort(Nr)};function Pr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=o-r,a=i-n;if(r<o&&n<i){const l=t.width*t.height,u=e.width*e.height,g=s*a,f=g/(l+u-g);return Number(f.toFixed(4))}return 0}const zr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:s}=i,a=n.get(s);if(a){const l=Pr(a,t);l>0&&o.push({id:s,data:{droppableContainer:i,value:l}})}}return o.sort($r)};function Br(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function mn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:te}function Ur(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((s,a)=>({...s,top:s.top+e*a.y,bottom:s.bottom+e*a.y,left:s.left+e*a.x,right:s.right+e*a.x}),{...n})}}const Xr=Ur(1);function bn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Yr(e,t,n){const r=bn(t);if(!r)return e;const{scaleX:o,scaleY:i,x:s,y:a}=r,l=e.left-s-(1-o)*parseFloat(n),u=e.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),g=o?e.width/o:e.width,f=i?e.height/i:e.height;return{width:g,height:f,top:u,right:l+g,bottom:u+f,left:l}}const Wr={ignoreTransform:!1};function Ne(e,t){t===void 0&&(t=Wr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:g}=Y(e).getComputedStyle(e);u&&(n=Yr(n,u,g))}const{top:r,left:o,width:i,height:s,bottom:a,right:l}=n;return{top:r,left:o,width:i,height:s,bottom:a,right:l}}function Jt(e){return Ne(e,{ignoreTransform:!0})}function Vr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Hr(e,t){return t===void 0&&(t=Y(e).getComputedStyle(e)),t.position==="fixed"}function Kr(e,t){t===void 0&&(t=Y(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function Nt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Ot(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Ze(o)||hn(o)||n.includes(o))return n;const i=Y(e).getComputedStyle(o);return o!==e&&Kr(o,i)&&n.push(o),Hr(o,i)?n:r(o.parentNode)}return e?r(e):n}function yn(e){const[t]=Nt(e,1);return t??null}function Dt(e){return!ht||!e?null:Ie(e)?e:It(e)?Ot(e)||e===Oe(e).scrollingElement?window:Ze(e)?e:null:null}function xn(e){return Ie(e)?e.scrollX:e.scrollLeft}function wn(e){return Ie(e)?e.scrollY:e.scrollTop}function Tt(e){return{x:xn(e),y:wn(e)}}var $;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})($||($={}));function Cn(e){return!ht||!e?!1:e===document.scrollingElement}function Dn(e){const t={x:0,y:0},n=Cn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:s,isRight:a,maxScroll:r,minScroll:t}}const qr={x:.2,y:.2};function Zr(e,t,n,r,o){let{top:i,left:s,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=qr);const{isTop:u,isBottom:g,isLeft:f,isRight:p}=Dn(e),h={x:0,y:0},w={x:0,y:0},v={height:t.height*o.y,width:t.width*o.x};return!u&&i<=t.top+v.height?(h.y=$.Backward,w.y=r*Math.abs((t.top+v.height-i)/v.height)):!g&&l>=t.bottom-v.height&&(h.y=$.Forward,w.y=r*Math.abs((t.bottom-v.height-l)/v.height)),!p&&a>=t.right-v.width?(h.x=$.Forward,w.x=r*Math.abs((t.right-v.width-a)/v.width)):!f&&s<=t.left+v.width&&(h.x=$.Backward,w.x=r*Math.abs((t.left+v.width-s)/v.width)),{direction:h,speed:w}}function Gr(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Rn(e){return e.reduce((t,n)=>Ae(t,Tt(n)),te)}function Jr(e){return e.reduce((t,n)=>t+xn(n),0)}function _r(e){return e.reduce((t,n)=>t+wn(n),0)}function Sn(e,t){if(t===void 0&&(t=Ne),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);yn(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Qr=[["x",["left","right"],Jr],["y",["top","bottom"],_r]];class $t{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Nt(n),o=Rn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,a]of Qr)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=a(r),g=o[i]-u;return this.rect[l]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ye{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function eo(e){const{EventTarget:t}=Y(e);return e instanceof t?e:Oe(e)}function Rt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var _;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(_||(_={}));function _t(e){e.preventDefault()}function to(e){e.stopPropagation()}var T;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(T||(T={}));const En={start:[T.Space,T.Enter],cancel:[T.Esc],end:[T.Space,T.Enter,T.Tab]},no=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case T.Right:return{...n,x:n.x+25};case T.Left:return{...n,x:n.x-25};case T.Down:return{...n,y:n.y+25};case T.Up:return{...n,y:n.y-25}}};class Tn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ye(Oe(n)),this.windowListeners=new Ye(Y(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_.Resize,this.handleCancel),this.windowListeners.add(_.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Sn(r),n(te)}handleKeyDown(t){if(vt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:i=En,coordinateGetter:s=no,scrollBehavior:a="smooth"}=o,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,g=u?{x:u.left,y:u.top}:te;this.referenceCoordinates||(this.referenceCoordinates=g);const f=s(t,{active:n,context:r.current,currentCoordinates:g});if(f){const p=dt(f,g),h={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const m=t.code,{isTop:C,isRight:S,isLeft:R,isBottom:y,maxScroll:b,minScroll:D}=Dn(v),x=Gr(v),E={x:Math.min(m===T.Right?x.right-x.width/2:x.right,Math.max(m===T.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(m===T.Down?x.bottom-x.height/2:x.bottom,Math.max(m===T.Down?x.top:x.top+x.height/2,f.y))},A=m===T.Right&&!S||m===T.Left&&!R,O=m===T.Down&&!y||m===T.Up&&!C;if(A&&E.x!==f.x){const M=v.scrollLeft+p.x,z=m===T.Right&&M<=b.x||m===T.Left&&M>=D.x;if(z&&!p.y){v.scrollTo({left:M,behavior:a});return}z?h.x=v.scrollLeft-M:h.x=m===T.Right?v.scrollLeft-b.x:v.scrollLeft-D.x,h.x&&v.scrollBy({left:-h.x,behavior:a});break}else if(O&&E.y!==f.y){const M=v.scrollTop+p.y,z=m===T.Down&&M<=b.y||m===T.Up&&M>=D.y;if(z&&!p.x){v.scrollTo({top:M,behavior:a});return}z?h.y=v.scrollTop-M:h.y=m===T.Down?v.scrollTop-b.y:v.scrollTop-D.y,h.y&&v.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(t,Ae(dt(f,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Tn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=En,onActivation:o}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const a=i.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Qt(e){return!!(e&&"distance"in e)}function en(e){return!!(e&&"delay"in e)}class Lt{constructor(t,n,r){var o;r===void 0&&(r=eo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=Oe(s),this.documentListeners=new Ye(this.document),this.listeners=new Ye(r),this.windowListeners=new Ye(Y(s)),this.initialCoordinates=(o=ut(i))!=null?o:te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(_.Resize,this.handleCancel),this.windowListeners.add(_.DragStart,_t),this.windowListeners.add(_.VisibilityChange,this.handleCancel),this.windowListeners.add(_.ContextMenu,_t),this.documentListeners.add(_.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(en(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(_.Click,to,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:s,options:{activationConstraint:a}}=i;if(!o)return;const l=(n=ut(t))!=null?n:te,u=dt(o,l);if(!r&&a){if(Qt(a)){if(a.tolerance!=null&&Rt(u,a.tolerance))return this.handleCancel();if(Rt(u,a.distance))return this.handleStart()}if(en(a)&&Rt(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===T.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ro={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ft extends Lt{constructor(t){const{event:n}=t,r=Oe(n.target);super(t,ro,r)}}Ft.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const oo={move:{name:"mousemove"},end:{name:"mouseup"}};var Mt;(function(e){e[e.RightClick=2]="RightClick"})(Mt||(Mt={}));class io extends Lt{constructor(t){super(t,oo,Oe(t.event.target))}}io.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Mt.RightClick?!1:(r?.({event:n}),!0)}}];const St={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class so extends Lt{constructor(t){super(t,St)}static setup(){return window.addEventListener(St.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(St.move.name,t)};function t(){}}}so.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var We;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(We||(We={}));var gt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(gt||(gt={}));function ao(e){let{acceleration:t,activator:n=We.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:s=5,order:a=gt.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:g,delta:f,threshold:p}=e;const h=co({delta:f,disabled:!i}),[w,v]=mr(),m=c.useRef({x:0,y:0}),C=c.useRef({x:0,y:0}),S=c.useMemo(()=>{switch(n){case We.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case We.DraggableRect:return o}},[n,o,l]),R=c.useRef(null),y=c.useCallback(()=>{const D=R.current;if(!D)return;const x=m.current.x*C.current.x,E=m.current.y*C.current.y;D.scrollBy(x,E)},[]),b=c.useMemo(()=>a===gt.TreeOrder?[...u].reverse():u,[a,u]);c.useEffect(()=>{if(!i||!u.length||!S){v();return}for(const D of b){if(r?.(D)===!1)continue;const x=u.indexOf(D),E=g[x];if(!E)continue;const{direction:A,speed:O}=Zr(D,E,S,t,p);for(const M of["x","y"])h[M][A[M]]||(O[M]=0,A[M]=0);if(O.x>0||O.y>0){v(),R.current=D,w(y,s),m.current=O,C.current=A;return}}m.current={x:0,y:0},C.current={x:0,y:0},v()},[t,y,r,v,i,s,JSON.stringify(S),JSON.stringify(h),w,u,b,g,JSON.stringify(p)])}const lo={x:{[$.Backward]:!1,[$.Forward]:!1},y:{[$.Backward]:!1,[$.Forward]:!1}};function co(e){let{delta:t,disabled:n}=e;const r=ct(t);return Ge(o=>{if(n||!r||!o)return lo;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[$.Backward]:o.x[$.Backward]||i.x===-1,[$.Forward]:o.x[$.Forward]||i.x===1},y:{[$.Backward]:o.y[$.Backward]||i.y===-1,[$.Forward]:o.y[$.Forward]||i.y===1}}},[n,t,r])}function uo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ge(o=>{var i;return t==null?null:(i=r??o)!=null?i:null},[r,t])}function fo(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,i=o.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var qe;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(qe||(qe={}));var jt;(function(e){e.Optimized="optimized"})(jt||(jt={}));const tn=new Map;function go(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,s]=c.useState(null),{frequency:a,measure:l,strategy:u}=o,g=c.useRef(e),f=m(),p=Ke(f),h=c.useCallback(function(C){C===void 0&&(C=[]),!p.current&&s(S=>S===null?C:S.concat(C.filter(R=>!S.includes(R))))},[p]),w=c.useRef(null),v=Ge(C=>{if(f&&!n)return tn;if(!C||C===tn||g.current!==e||i!=null){const S=new Map;for(let R of e){if(!R)continue;if(i&&i.length>0&&!i.includes(R.id)&&R.rect.current){S.set(R.id,R.rect.current);continue}const y=R.node.current,b=y?new $t(l(y),y):null;R.rect.current=b,b&&S.set(R.id,b)}return S}return C},[e,i,n,f,l]);return c.useEffect(()=>{g.current=e},[e]),c.useEffect(()=>{f||h()},[n,f]),c.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),c.useEffect(()=>{f||typeof a!="number"||w.current!==null||(w.current=setTimeout(()=>{h(),w.current=null},a))},[a,f,h,...r]),{droppableRects:v,measureDroppableContainers:h,measuringScheduled:i!=null};function m(){switch(u){case qe.Always:return!1;case qe.BeforeDragging:return n;default:return!n}}}function Pt(e,t){return Ge(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ho(e,t){return Pt(e,t)}function po(e){let{callback:t,disabled:n}=e;const r=pt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function mt(e){let{callback:t,disabled:n}=e;const r=pt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function vo(e){return new $t(Ne(e),e)}function nn(e,t,n){t===void 0&&(t=vo);const[r,o]=c.useState(null);function i(){o(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const g=t(e);return JSON.stringify(l)===JSON.stringify(g)?l:g})}const s=po({callback(l){if(e)for(const u of l){const{type:g,target:f}=u;if(g==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),a=mt({callback:i});return ee(()=>{i(),e?(a?.observe(e),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[e]),r}function mo(e){const t=Pt(e);return mn(e,t)}const rn=[];function bo(e){const t=c.useRef(e),n=Ge(r=>e?r&&r!==rn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Nt(e):rn,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function yo(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(i=>{const s=Dt(i.target);s&&n(a=>a?(a.set(s,Tt(s)),new Map(a)):null)},[]);return c.useEffect(()=>{const i=r.current;if(e!==i){s(i);const a=e.map(l=>{const u=Dt(l);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Tt(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{s(e),s(i)};function s(a){a.forEach(l=>{const u=Dt(l);u?.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Ae(i,s),te):Rn(e):te,[e,t])}function on(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==te;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?dt(e,n.current):te}function xo(e){c.useEffect(()=>{if(!ht)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function wo(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:i}=r;return n[o]=s=>{i(s,t)},n},{}),[e,t])}function Mn(e){return c.useMemo(()=>e?Vr(e):null,[e])}const sn=[];function Co(e,t){t===void 0&&(t=Ne);const[n]=e,r=Mn(n?Y(n):null),[o,i]=c.useState(sn);function s(){i(()=>e.length?e.map(l=>Cn(l)?r:new $t(t(l),l)):sn)}const a=mt({callback:s});return ee(()=>{a?.disconnect(),s(),e.forEach(l=>a?.observe(l))},[e]),o}function jn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ze(t)?t:e}function Do(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(u=>{for(const{target:g}of u)if(Ze(g)){r(f=>{const p=t(g);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=mt({callback:o}),s=c.useCallback(u=>{const g=jn(u);i?.disconnect(),g&&i?.observe(g),r(g?t(g):null)},[t,i]),[a,l]=lt(s);return c.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Ro=[{sensor:Ft,options:{}},{sensor:Tn,options:{}}],So={current:{}},st={draggable:{measure:Jt},droppable:{measure:Jt,strategy:qe.WhileDragging,frequency:jt.Optimized},dragOverlay:{measure:Ne}};class Ve extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Eo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ve,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ft},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:st,measureDroppableContainers:ft,windowRect:null,measuringScheduled:!1},An={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ft,draggableNodes:new Map,over:null,measureDroppableContainers:ft},_e=c.createContext(An),kn=c.createContext(Eo);function To(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ve}}}function Mo(e,t){switch(t.type){case N.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case N.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case N.DragEnd:case N.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case N.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Ve(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case N.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Ve(e.droppable.containers);return s.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:s}}}case N.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Ve(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function jo(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(_e),i=ct(r),s=ct(n?.id);return c.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!vt(i)||document.activeElement===i.target)return;const a=o.get(s);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const g of[l.current,u.current]){if(!g)continue;const f=xr(g);if(f){f.focus();break}}})}},[r,t,o,s,i]),null}function In(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...r}),n):n}function Ao(e){return c.useMemo(()=>({draggable:{...st.draggable,...e?.draggable},droppable:{...st.droppable,...e?.droppable},dragOverlay:{...st.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function ko(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=c.useRef(!1),{x:s,y:a}=typeof o=="boolean"?{x:o,y:o}:o;ee(()=>{if(!s&&!a||!t){i.current=!1;return}if(i.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const g=n(u),f=mn(g,r);if(s||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=yn(u);p&&p.scrollBy({top:f.y,left:f.x})}},[t,s,a,r,n])}const bt=c.createContext({...te,scaleX:1,scaleY:1});var pe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pe||(pe={}));const Io=c.memo(function(t){var n,r,o,i;let{id:s,accessibility:a,autoScroll:l=!0,children:u,sensors:g=Ro,collisionDetection:f=zr,measuring:p,modifiers:h,...w}=t;const v=c.useReducer(Mo,void 0,To),[m,C]=v,[S,R]=Er(),[y,b]=c.useState(pe.Uninitialized),D=y===pe.Initialized,{draggable:{active:x,nodes:E,translate:A},droppable:{containers:O}}=m,M=x!=null?E.get(x):null,z=c.useRef({initial:null,translated:null}),W=c.useMemo(()=>{var B;return x!=null?{id:x,data:(B=M?.data)!=null?B:So,rect:z}:null},[x,M]),Z=c.useRef(null),[ye,Ce]=c.useState(null),[k,xe]=c.useState(null),Q=Ke(w,Object.values(w)),$e=Je("DndDescribedBy",s),Qe=c.useMemo(()=>O.getEnabled(),[O]),V=Ao(p),{droppableRects:ie,measureDroppableContainers:we,measuringScheduled:Le}=go(Qe,{dragging:D,dependencies:[A.x,A.y],config:V.droppable}),G=uo(E,x),et=c.useMemo(()=>k?ut(k):null,[k]),ce=Qn(),se=ho(G,V.draggable.measure);ko({activeNode:x!=null?E.get(x):null,config:ce.layoutShiftCompensation,initialRect:se,measure:V.draggable.measure});const j=nn(G,V.draggable.measure,se),Fe=nn(G?G.parentElement:null),ne=c.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),De=O.getNodeFor((n=ne.current.over)==null?void 0:n.id),ae=Do({measure:V.dragOverlay.measure}),Re=(r=ae.nodeRef.current)!=null?r:G,Se=D?(o=ae.rect)!=null?o:j:null,zt=!!(ae.nodeRef.current&&ae.rect),Bt=mo(zt?null:j),yt=Mn(Re?Y(Re):null),de=bo(D?De??G:null),tt=Co(de),nt=In(h,{transform:{x:A.x-Bt.x,y:A.y-Bt.y,scaleX:1,scaleY:1},activatorEvent:k,active:W,activeNodeRect:j,containerNodeRect:Fe,draggingNodeRect:Se,over:ne.current.over,overlayNodeRect:ae.rect,scrollableAncestors:de,scrollableAncestorRects:tt,windowRect:yt}),Ut=et?Ae(et,A):null,Xt=yo(de),Hn=on(Xt),Kn=on(Xt,[j]),Ee=Ae(nt,Hn),Te=Se?Xr(Se,nt):null,Pe=W&&Te?f({active:W,collisionRect:Te,droppableRects:ie,droppableContainers:Qe,pointerCoordinates:Ut}):null,Yt=Lr(Pe,"id"),[ue,Wt]=c.useState(null),qn=zt?nt:Ae(nt,Kn),Zn=Br(qn,(i=ue?.rect)!=null?i:null,j),xt=c.useRef(null),Vt=c.useCallback((B,H)=>{let{sensor:K,options:fe}=H;if(Z.current==null)return;const J=E.get(Z.current);if(!J)return;const q=B.nativeEvent,re=new K({active:Z.current,activeNode:J,event:q,options:fe,context:ne,onAbort(F){if(!E.get(F))return;const{onDragAbort:oe}=Q.current,le={id:F};oe?.(le),S({type:"onDragAbort",event:le})},onPending(F,ge,oe,le){if(!E.get(F))return;const{onDragPending:Be}=Q.current,he={id:F,constraint:ge,initialCoordinates:oe,offset:le};Be?.(he),S({type:"onDragPending",event:he})},onStart(F){const ge=Z.current;if(ge==null)return;const oe=E.get(ge);if(!oe)return;const{onDragStart:le}=Q.current,ze={activatorEvent:q,active:{id:ge,data:oe.data,rect:z}};je.unstable_batchedUpdates(()=>{le?.(ze),b(pe.Initializing),C({type:N.DragStart,initialCoordinates:F,active:ge}),S({type:"onDragStart",event:ze}),Ce(xt.current),xe(q)})},onMove(F){C({type:N.DragMove,coordinates:F})},onEnd:Me(N.DragEnd),onCancel:Me(N.DragCancel)});xt.current=re;function Me(F){return async function(){const{active:oe,collisions:le,over:ze,scrollAdjustedTranslate:Be}=ne.current;let he=null;if(oe&&Be){const{cancelDrop:Ue}=Q.current;he={activatorEvent:q,active:oe,collisions:le,delta:Be,over:ze},F===N.DragEnd&&typeof Ue=="function"&&await Promise.resolve(Ue(he))&&(F=N.DragCancel)}Z.current=null,je.unstable_batchedUpdates(()=>{C({type:F}),b(pe.Uninitialized),Wt(null),Ce(null),xe(null),xt.current=null;const Ue=F===N.DragEnd?"onDragEnd":"onDragCancel";if(he){const wt=Q.current[Ue];wt?.(he),S({type:Ue,event:he})}})}}},[E]),Gn=c.useCallback((B,H)=>(K,fe)=>{const J=K.nativeEvent,q=E.get(fe);if(Z.current!==null||!q||J.dndKit||J.defaultPrevented)return;const re={active:q};B(K,H.options,re)===!0&&(J.dndKit={capturedBy:H.sensor},Z.current=fe,Vt(K,H))},[E,Vt]),Ht=fo(g,Gn);xo(g),ee(()=>{j&&y===pe.Initializing&&b(pe.Initialized)},[j,y]),c.useEffect(()=>{const{onDragMove:B}=Q.current,{active:H,activatorEvent:K,collisions:fe,over:J}=ne.current;if(!H||!K)return;const q={active:H,activatorEvent:K,collisions:fe,delta:{x:Ee.x,y:Ee.y},over:J};je.unstable_batchedUpdates(()=>{B?.(q),S({type:"onDragMove",event:q})})},[Ee.x,Ee.y]),c.useEffect(()=>{const{active:B,activatorEvent:H,collisions:K,droppableContainers:fe,scrollAdjustedTranslate:J}=ne.current;if(!B||Z.current==null||!H||!J)return;const{onDragOver:q}=Q.current,re=fe.get(Yt),Me=re&&re.rect.current?{id:re.id,rect:re.rect.current,data:re.data,disabled:re.disabled}:null,F={active:B,activatorEvent:H,collisions:K,delta:{x:J.x,y:J.y},over:Me};je.unstable_batchedUpdates(()=>{Wt(Me),q?.(F),S({type:"onDragOver",event:F})})},[Yt]),ee(()=>{ne.current={activatorEvent:k,active:W,activeNode:G,collisionRect:Te,collisions:Pe,droppableRects:ie,draggableNodes:E,draggingNode:Re,draggingNodeRect:Se,droppableContainers:O,over:ue,scrollableAncestors:de,scrollAdjustedTranslate:Ee},z.current={initial:Se,translated:Te}},[W,G,Pe,Te,E,Re,Se,ie,O,ue,de,Ee]),ao({...ce,delta:A,draggingRect:Te,pointerCoordinates:Ut,scrollableAncestors:de,scrollableAncestorRects:tt});const Jn=c.useMemo(()=>({active:W,activeNode:G,activeNodeRect:j,activatorEvent:k,collisions:Pe,containerNodeRect:Fe,dragOverlay:ae,draggableNodes:E,droppableContainers:O,droppableRects:ie,over:ue,measureDroppableContainers:we,scrollableAncestors:de,scrollableAncestorRects:tt,measuringConfiguration:V,measuringScheduled:Le,windowRect:yt}),[W,G,j,k,Pe,Fe,ae,E,O,ie,ue,we,de,tt,V,Le,yt]),_n=c.useMemo(()=>({activatorEvent:k,activators:Ht,active:W,activeNodeRect:j,ariaDescribedById:{draggable:$e},dispatch:C,draggableNodes:E,over:ue,measureDroppableContainers:we}),[k,Ht,W,j,C,$e,E,ue,we]);return I.createElement(vn.Provider,{value:R},I.createElement(_e.Provider,{value:_n},I.createElement(kn.Provider,{value:Jn},I.createElement(bt.Provider,{value:Zn},u)),I.createElement(jo,{disabled:a?.restoreFocus===!1})),I.createElement(jr,{...a,hiddenTextDescribedById:$e}));function Qn(){const B=ye?.autoScrollEnabled===!1,H=typeof l=="object"?l.enabled===!1:l===!1,K=D&&!B&&!H;return typeof l=="object"?{...l,enabled:K}:{enabled:K}}}),Oo=c.createContext(null),an="button",No="Draggable";function $o(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=Je(No),{activators:s,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:g,draggableNodes:f,over:p}=c.useContext(_e),{role:h=an,roleDescription:w="draggable",tabIndex:v=0}=o??{},m=l?.id===t,C=c.useContext(m?bt:Oo),[S,R]=lt(),[y,b]=lt(),D=wo(s,t),x=Ke(n);ee(()=>(f.set(t,{id:t,key:i,node:S,activatorNode:y,data:x}),()=>{const A=f.get(t);A&&A.key===i&&f.delete(t)}),[f,t]);const E=c.useMemo(()=>({role:h,tabIndex:v,"aria-disabled":r,"aria-pressed":m&&h===an?!0:void 0,"aria-roledescription":w,"aria-describedby":g.draggable}),[r,h,v,m,w,g.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:E,isDragging:m,listeners:r?void 0:D,node:S,over:p,setNodeRef:R,setActivatorNodeRef:b,transform:C}}function On(){return c.useContext(kn)}const Lo="Droppable",Fo={timeout:25};function Po(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=Je(Lo),{active:s,dispatch:a,over:l,measureDroppableContainers:u}=c.useContext(_e),g=c.useRef({disabled:n}),f=c.useRef(!1),p=c.useRef(null),h=c.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:m}={...Fo,...o},C=Ke(v??r),S=c.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(C.current)?C.current:[C.current]),h.current=null},m)},[m]),R=mt({callback:S,disabled:w||!s}),y=c.useCallback((E,A)=>{R&&(A&&(R.unobserve(A),f.current=!1),E&&R.observe(E))},[R]),[b,D]=lt(y),x=Ke(t);return c.useEffect(()=>{!R||!b.current||(R.disconnect(),f.current=!1,R.observe(b.current))},[b,R]),c.useEffect(()=>(a({type:N.RegisterDroppable,element:{id:r,key:i,disabled:n,node:b,rect:p,data:x}}),()=>a({type:N.UnregisterDroppable,key:i,id:r})),[r]),c.useEffect(()=>{n!==g.current.disabled&&(a({type:N.SetDroppableDisabled,id:r,key:i,disabled:n}),g.current.disabled=n)},[r,i,n,a]),{active:s,rect:p,isOver:l?.id===r,node:b,over:l,setNodeRef:D}}function zo(e){let{animation:t,children:n}=e;const[r,o]=c.useState(null),[i,s]=c.useState(null),a=ct(n);return!n&&!r&&a&&o(a),ee(()=>{if(!i)return;const l=r?.key,u=r?.props.id;if(l==null||u==null){o(null);return}Promise.resolve(t(u,i)).then(()=>{o(null)})},[t,r,i]),I.createElement(I.Fragment,null,n,r?c.cloneElement(r,{ref:s}):null)}const Bo={x:0,y:0,scaleX:1,scaleY:1};function Uo(e){let{children:t}=e;return I.createElement(_e.Provider,{value:An},I.createElement(bt.Provider,{value:Bo},t))}const Xo={position:"fixed",touchAction:"none"},Yo=e=>vt(e)?"transform 250ms ease":void 0,Wo=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:i,className:s,rect:a,style:l,transform:u,transition:g=Yo}=e;if(!a)return null;const f=o?u:{...u,scaleX:1,scaleY:1},p={...Xo,width:a.width,height:a.height,top:a.top,left:a.left,transform:me.Transform.toString(f),transformOrigin:o&&r?Or(r,a):void 0,transition:typeof g=="function"?g(r):g,...l};return I.createElement(n,{className:s,style:p,ref:t},i)}),Vo=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[a,l]of Object.entries(i.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(i!=null&&i.dragOverlay)for(const[a,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[l,u]of Object.entries(o))n.node.style.setProperty(l,u);s!=null&&s.active&&n.node.classList.remove(s.active)}},Ho=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:me.Transform.toString(t)},{transform:me.Transform.toString(n)}]},Ko={duration:250,easing:"ease",keyframes:Ho,sideEffects:Vo({styles:{active:{opacity:"0"}}})};function qo(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return pt((i,s)=>{if(t===null)return;const a=n.get(i);if(!a)return;const l=a.node.current;if(!l)return;const u=jn(s);if(!u)return;const{transform:g}=Y(s).getComputedStyle(s),f=bn(g);if(!f)return;const p=typeof t=="function"?t:Zo(t);return Sn(l,o.draggable.measure),p({active:{id:i,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:s,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function Zo(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...Ko,...e};return i=>{let{active:s,dragOverlay:a,transform:l,...u}=i;if(!t)return;const g={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},f={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/a.rect.height:1},p={x:l.x-g.x,y:l.y-g.y,...f},h=o({...u,active:s,dragOverlay:a,transform:{initial:l,final:p}}),[w]=h,v=h[h.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const m=r?.({active:s,dragOverlay:a,...u}),C=a.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(S=>{C.onfinish=()=>{m?.(),S()}})}}let ln=0;function Go(e){return c.useMemo(()=>{if(e!=null)return ln++,ln},[e])}const Jo=I.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:i,modifiers:s,wrapperElement:a="div",className:l,zIndex:u=999}=e;const{activatorEvent:g,active:f,activeNodeRect:p,containerNodeRect:h,draggableNodes:w,droppableContainers:v,dragOverlay:m,over:C,measuringConfiguration:S,scrollableAncestors:R,scrollableAncestorRects:y,windowRect:b}=On(),D=c.useContext(bt),x=Go(f?.id),E=In(s,{activatorEvent:g,active:f,activeNodeRect:p,containerNodeRect:h,draggingNodeRect:m.rect,over:C,overlayNodeRect:m.rect,scrollableAncestors:R,scrollableAncestorRects:y,transform:D,windowRect:b}),A=Pt(p),O=qo({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:S}),M=A?m.setRef:void 0;return I.createElement(Uo,null,I.createElement(zo,{animation:O},f&&x?I.createElement(Wo,{key:x,id:f.id,ref:M,as:a,activatorEvent:g,adjustScale:t,className:l,transition:i,rect:A,style:{zIndex:u,...o},transform:E},n):null))}),_o=e=>{let{transform:t}=e;return{...t,x:0}};function Nn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Qo(e,t){return e.reduce((n,r,o)=>{const i=t.get(r);return i&&(n[o]=i),n},Array(e.length))}function ot(e){return e!==null&&e>=0}function ei(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ti(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const $n=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=Nn(t,r,n),s=t[o],a=i[o];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},it={scaleX:1,scaleY:1},ni=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:s}=e;const a=(t=i[n])!=null?t:r;if(!a)return null;if(o===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(a.top+a.height):u.top-a.top,...it}:null}const l=ri(i,o,n);return o>n&&o<=s?{x:0,y:-a.height-l,...it}:o<n&&o>=s?{x:0,y:a.height+l,...it}:{x:0,y:0,...it}};function ri(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];return r?n<t?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Ln="Sortable",Fn=I.createContext({activeIndex:-1,containerId:Ln,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$n,disabled:{draggable:!1,droppable:!1}});function oi(e){let{children:t,id:n,items:r,strategy:o=$n,disabled:i=!1}=e;const{active:s,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:g}=On(),f=Je(Ln,n),p=a.rect!==null,h=c.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),w=s!=null,v=s?h.indexOf(s.id):-1,m=u?h.indexOf(u.id):-1,C=c.useRef(h),S=!ei(h,C.current),R=m!==-1&&v===-1||S,y=ti(i);ee(()=>{S&&w&&g(h)},[S,h,w,g]),c.useEffect(()=>{C.current=h},[h]);const b=c.useMemo(()=>({activeIndex:v,containerId:f,disabled:y,disableTransforms:R,items:h,overIndex:m,useDragOverlay:p,sortedRects:Qo(h,l),strategy:o}),[v,f,y.draggable,y.droppable,R,h,m,l,p,o]);return I.createElement(Fn.Provider,{value:b},t)}const ii=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Nn(n,r,o).indexOf(t)},si=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:s,previousItems:a,previousContainerId:l,transition:u}=e;return!u||!r||a!==i&&o===s?!1:n?!0:s!==o&&t===l},ai={duration:200,easing:"ease"},Pn="transform",li=me.Transition.toString({property:Pn,duration:0,easing:"linear"}),ci={roleDescription:"sortable"};function di(e){let{disabled:t,index:n,node:r,rect:o}=e;const[i,s]=c.useState(null),a=c.useRef(n);return ee(()=>{if(!t&&n!==a.current&&r.current){const l=o.current;if(l){const u=Ne(r.current,{ignoreTransform:!0}),g={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(g.x||g.y)&&s(g)}}n!==a.current&&(a.current=n)},[t,n,r,o]),c.useEffect(()=>{i&&s(null)},[i]),i}function ui(e){let{animateLayoutChanges:t=si,attributes:n,disabled:r,data:o,getNewIndex:i=ii,id:s,strategy:a,resizeObserverConfig:l,transition:u=ai}=e;const{items:g,containerId:f,activeIndex:p,disabled:h,disableTransforms:w,sortedRects:v,overIndex:m,useDragOverlay:C,strategy:S}=c.useContext(Fn),R=fi(r,h),y=g.indexOf(s),b=c.useMemo(()=>({sortable:{containerId:f,index:y,items:g},...o}),[f,o,y,g]),D=c.useMemo(()=>g.slice(g.indexOf(s)),[g,s]),{rect:x,node:E,isOver:A,setNodeRef:O}=Po({id:s,data:b,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...l}}),{active:M,activatorEvent:z,activeNodeRect:W,attributes:Z,setNodeRef:ye,listeners:Ce,isDragging:k,over:xe,setActivatorNodeRef:Q,transform:$e}=$o({id:s,data:b,attributes:{...ci,...n},disabled:R.draggable}),Qe=vr(O,ye),V=!!M,ie=V&&!w&&ot(p)&&ot(m),we=!C&&k,Le=we&&ie?$e:null,et=ie?Le??(a??S)({rects:v,activeNodeRect:W,activeIndex:p,overIndex:m,index:y}):null,ce=ot(p)&&ot(m)?i({id:s,items:g,activeIndex:p,overIndex:m}):y,se=M?.id,j=c.useRef({activeId:se,items:g,newIndex:ce,containerId:f}),Fe=g!==j.current.items,ne=t({active:M,containerId:f,isDragging:k,isSorting:V,id:s,index:y,items:g,newIndex:j.current.newIndex,previousItems:j.current.items,previousContainerId:j.current.containerId,transition:u,wasDragging:j.current.activeId!=null}),De=di({disabled:!ne,index:y,node:E,rect:x});return c.useEffect(()=>{V&&j.current.newIndex!==ce&&(j.current.newIndex=ce),f!==j.current.containerId&&(j.current.containerId=f),g!==j.current.items&&(j.current.items=g)},[V,ce,f,g]),c.useEffect(()=>{if(se===j.current.activeId)return;if(se!=null&&j.current.activeId==null){j.current.activeId=se;return}const Re=setTimeout(()=>{j.current.activeId=se},50);return()=>clearTimeout(Re)},[se]),{active:M,activeIndex:p,attributes:Z,data:b,rect:x,index:y,newIndex:ce,items:g,isOver:A,isSorting:V,isDragging:k,listeners:Ce,node:E,overIndex:m,over:xe,setNodeRef:Qe,setActivatorNodeRef:Q,setDroppableNodeRef:O,setDraggableNodeRef:ye,transform:De??et,transition:ae()};function ae(){if(De||Fe&&j.current.newIndex===y)return li;if(!(we&&!vt(z)||!u)&&(V||ne))return me.Transition.toString({...u,property:Pn})}}function fi(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}T.Down,T.Right,T.Up,T.Left;const gi=U(L)`
  position: absolute;
  left: -3.4rem;
  top: 0px;

  &:before {
    content: '';
    width: 0.4rem;
    height: 1.2rem;
    background: ${({theme:e,color:t})=>e.colors[t]};
    display: block;
  }
`,hi=U.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:e,color:t})=>e.colors[t]};
  }
`,pi=e=>d.jsx(gi,{children:d.jsx(hi,{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z"})})}),vi=e=>{let t;switch(e){case"date":case"datetime":case"time":case"timestamp":t="date";break;case"integer":case"biginteger":case"decimal":case"float":t="number";break;case"string":case"text":t="text";break;case"":t="relation";break;default:t=e}return t},zn=U(L)`
  &.component-row,
  &.dynamiczone-row {
    position: relative;

    > ul:first-of-type {
      padding: 0 0 0 104px;
      position: relative;

      &::before {
        content: '';
        width: 0.4rem;
        height: ${({$isFromDynamicZone:e})=>e?"calc(100% - 65px)":"calc(100%)"};
        position: absolute;
        left: 7rem;
        border-radius: 4px;

        ${({$isFromDynamicZone:e,$isChildOfDynamicZone:t,theme:n})=>t?`background-color: ${n.colors.primary200};`:e?`background-color: ${n.colors.primary200};`:`background: ${n.colors.neutral150};`}
      }
    }
  }

  &.dynamiczone-row > ul:first-of-type {
    padding: 0;
  }
`,Bn=({component:e,isFromDynamicZone:t=!1,firstLoopComponentUid:n})=>{const{components:r}=be(),o=He(r,e);return d.jsx(zn,{$isChildOfDynamicZone:t,className:"component-row",children:d.jsx(Vn,{type:o,firstLoopComponentUid:n||e,isFromDynamicZone:t,isSub:!0,secondLoopComponentUid:n?e:null})})},mi=({type:e,customField:t=null,repeatable:n=!1,multiple:r=!1})=>{const{formatMessage:o}=ke();let i=e;return["integer","biginteger","float","decimal"].includes(e)?i="number":["string"].includes(e)&&(i="text"),t?o({id:X("attribute.customField"),defaultMessage:"Custom field"}):d.jsxs(d.Fragment,{children:[n&&o({id:X("component.repeatable"),defaultMessage:"Repeatable"}),r&&o({id:X("media.multiple"),defaultMessage:"Multiple"})," ",o({id:X(`attribute.${i}`),defaultMessage:e})]})},bi=({isActive:e=!1,icon:t="dashboard"})=>{const n=qt[t]||qt.dashboard;return d.jsx(P,{alignItems:"center",background:e?"primary200":"neutral200",justifyContent:"center",height:8,width:8,borderRadius:"50%",children:d.jsx(n,{height:"2rem",width:"2rem"})})},Un=U(L)`
  position: absolute;
  display: none;
  top: 5px;
  right: 0.8rem;

  svg {
    width: 1rem;
    height: 1rem;

    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,yi=U(P)`
  width: 14rem;
  height: 8rem;
  position: relative;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  max-width: 100%;

  &.active,
  &:focus,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};
    color: ${({theme:e})=>e.colors.primary600};

    ${Un} {
      display: block;
    }

    /* > ComponentIcon */
    > div:first-child {
      background: ${({theme:e})=>e.colors.primary200};
      color: ${({theme:e})=>e.colors.primary600};

      svg {
        path {
          fill: ${({theme:e})=>e.colors.primary600};
        }
      }
    }
  }
`,xi=({component:e,dzName:t,index:n,isActive:r=!1,isInDevelopmentMode:o=!1,onClick:i,forTarget:s,targetUid:a,disabled:l})=>{const{components:u,removeComponentFromDynamicZone:g}=be(),f=He(u,e),{icon:p,displayName:h}=f?.info||{},w=v=>{v.stopPropagation(),g({forTarget:s,targetUid:a,dzName:t,componentToRemoveIndex:n})};return d.jsxs(yi,{alignItems:"center",direction:"column",className:r?"active":"",borderRadius:"borderRadius",justifyContent:"center",paddingLeft:4,paddingRight:4,shrink:0,onClick:i,role:"tab",tabIndex:r?0:-1,cursor:"pointer","aria-selected":r,"aria-controls":`dz-${t}-panel-${n}`,id:`dz-${t}-tab-${n}`,children:[d.jsx(bi,{icon:p,isActive:r}),d.jsx(L,{marginTop:1,maxWidth:"100%",children:d.jsx(ve,{variant:"pi",fontWeight:"bold",ellipsis:!0,children:h})}),o&&!l&&d.jsx(Un,{cursor:"pointer",tag:"button",onClick:w,children:d.jsx(er,{})})]})},wi=U(Xe)`
  width: 3.2rem;
  height: 3.2rem;
  padding: 0.9rem;
  border-radius: 6.4rem;
  background: ${({theme:e,disabled:t})=>t?e.colors.neutral100:e.colors.primary100};
  path {
    fill: ${({theme:e,disabled:t})=>t?e.colors.neutral600:e.colors.primary600};
  }
`,Ci=U(P)`
  width: 100%;
  overflow-x: auto;

  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
`,Di=U(P)`
  flex-shrink: 0;
  width: 14rem;
  height: 8rem;
  justify-content: center;
  align-items: center;
`,Ri=({components:e=[],addComponent:t,name:n,forTarget:r,targetUid:o,disabled:i=!1})=>{const{isInDevelopmentMode:s}=be(),[a,l]=c.useState(0),{formatMessage:u}=ke(),g=p=>{a!==p&&l(p)},f=()=>{t(n)};return d.jsx(zn,{className:"dynamiczone-row",$isFromDynamicZone:!0,children:d.jsxs(L,{children:[d.jsx(L,{padding:2,paddingLeft:"104px",children:d.jsxs(Ci,{gap:2,children:[s&&d.jsx("button",{type:"button",onClick:f,disabled:i,style:{cursor:i?"not-allowed":"pointer"},children:d.jsxs(Di,{direction:"column",alignItems:"stretch",gap:1,children:[d.jsx(wi,{disabled:i}),d.jsx(ve,{variant:"pi",fontWeight:"bold",textColor:i?"neutral600":"primary600",children:u({id:X("button.component.add"),defaultMessage:"Add a component"})})]})}),d.jsx(P,{role:"tablist",gap:2,children:e.map((p,h)=>d.jsx(xi,{dzName:n||"",index:h,component:p,isActive:a===h,isInDevelopmentMode:s,onClick:()=>g(h),forTarget:r,targetUid:o,disabled:i},p))})]})}),d.jsx(L,{children:e.map((p,h)=>d.jsx(L,{id:`dz-${n}-panel-${h}`,role:"tabpanel","aria-labelledby":`dz-${n}-tab-${h}`,style:{display:a===h?"block":"none"},children:d.jsx(Bn,{isFromDynamicZone:!0,component:p},p)},p))})]})})},Si=U(P)`
  justify-content: space-between;

  border-top: ${({theme:e,$isOverlay:t})=>t?"none":`1px solid ${e.colors.neutral150}`};

  padding-top: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[4]};

  opacity: ${({$isDragging:e})=>e?0:1};
  align-items: center;
`,Ei=U(L)`
  list-style: none;
  list-style-type: none;
`,Xn=c.forwardRef((e,t)=>{const{style:n,...r}=e;return d.jsx(Ei,{tag:"li",ref:t,...e.attributes,style:n,background:"neutral0",shadow:e.isOverlay?"filterShadow":"none","aria-label":e.item.name,children:d.jsx(Ti,{...r})})}),Ti=c.memo(e=>{const{item:t,firstLoopComponentUid:n,isFromDynamicZone:r,addComponentToDZ:o,secondLoopComponentUid:i,type:s,isDragging:a,isOverlay:l,handleRef:u,listeners:g}=e,f=l||a,[p,h]=c.useState(!0),w=s.status==="REMOVED",{contentTypes:v,removeAttribute:m,isInDevelopmentMode:C}=be(),{onOpenModalEditField:S,onOpenModalEditCustomField:R}=kt(),{formatMessage:y}=ke(),b=t.status==="REMOVED",D=t.type==="relation"&&t.relation.includes("morph"),x=["integer","biginteger","float","decimal"].includes(t.type)?"number":t.type,E=t.type==="relation"?He(v,t.target):null,A=He(E,"plugin"),O="target"in t&&t.target?"relation":x,M=()=>{if(!D&&t.configurable!==!1){const k=i||n||s.uid,xe=vi(t.type),Q=t.type==="component"?"2":null;t.customField?R({forTarget:s.modelType,targetUid:k,attributeName:t.name,attributeType:xe,customFieldUid:t.customField}):S({forTarget:s.modelType,targetUid:k,attributeName:t.name,attributeType:xe,step:Q})}};let z;i&&n?z=2:n?z=1:z=0;const W=!w&&!b,Z=!w&&!b,ye=w||b?"not-allowed":"move",Ce=C&&t.configurable!==!1&&!D&&W;return d.jsxs(d.Fragment,{children:[d.jsxs(Si,{$isOverlay:l,$isDragging:a,onClick:Ce?M:void 0,paddingLeft:4,paddingRight:4,children:[d.jsxs(P,{alignItems:"center",overflow:"hidden",gap:2,children:[z!==0&&!l&&d.jsx(pi,{color:r?"primary200":"neutral150"}),C&&d.jsx(rt,{cursor:ye,role:"Handle",ref:u,...g,variant:"ghost",withTooltip:!1,label:`${y({id:"app.utils.drag",defaultMessage:"Drag"})} ${t.name}`,disabled:w||b,children:d.jsx(tr,{})}),d.jsxs(P,{gap:4,children:[d.jsxs(P,{gap:4,alignItems:"center",children:[d.jsx(hr,{type:O,customField:t.customField}),d.jsxs(ve,{textColor:"neutral800",fontWeight:"bold",textDecoration:b?"line-through":"none",ellipsis:!0,overflow:"hidden",children:[t.name,"required"in t&&t.required&&d.jsx(ve,{textColor:"danger600",children:"* "})]})]}),d.jsx(P,{children:d.jsxs(ve,{textColor:"neutral600",children:[d.jsx(mi,{type:t.type,customField:t.customField,repeatable:"repeatable"in t&&t.repeatable,multiple:"multiple"in t&&t.multiple}),t.type==="relation"&&d.jsxs(d.Fragment,{children:[" (",nr(t.relation,t.targetAttribute),") ",E&&y({id:X("modelPage.attribute.with"),defaultMessage:"with"})," ",E&&d.jsx(cn,{onClick:k=>k.stopPropagation(),tag:dn,to:`/plugins/content-type-builder/content-types/${E.uid}`,children:At(E.info.displayName)}),A&&`(${y({id:X("from"),defaultMessage:"from"})}: ${A})`]}),t.type==="component"&&d.jsx(ji,{uid:t.component})]})})]})]}),d.jsx(L,{children:d.jsx(P,{justifyContent:"flex-end",gap:1,onClick:k=>k.stopPropagation(),children:d.jsxs(d.Fragment,{children:[d.jsx(L,{children:t.status&&d.jsx(pr,{status:t.status})}),["component","dynamiczone"].includes(t.type)&&d.jsx(rt,{onClick:k=>{k.preventDefault(),k.stopPropagation(),h(!p)},"aria-expanded":p,label:y({id:"app.utils.toggle",defaultMessage:"Toggle"}),variant:"ghost",withTooltip:!1,children:d.jsx(rr,{"aria-hidden":!0,fill:"neutral500",style:{transform:`rotate(${p?"0deg":"-90deg"})`,transition:"transform 0.5s"}})}),C&&t.configurable!==!1?d.jsxs(d.Fragment,{children:[!D&&d.jsx(rt,{onClick:M,label:`${y({id:"app.utils.edit",defaultMessage:"Edit"})} ${t.name}`,variant:"ghost",disabled:!W,children:d.jsx(un,{})}),d.jsx(rt,{onClick:k=>{k.stopPropagation(),m({forTarget:s.modelType,targetUid:s.uid,attributeToRemoveName:t.name})},label:`${y({id:"global.delete",defaultMessage:"Delete"})} ${t.name}`,variant:"ghost",disabled:!Z,children:d.jsx(or,{})})]}):d.jsx(P,{padding:2,children:d.jsx(ir,{fill:"neutral500"})})]})})})]}),d.jsxs(Mi,{$shouldHideNestedInfos:f,$isOpen:p,children:[t.type==="component"&&d.jsx(Bn,{...t,isFromDynamicZone:r,firstLoopComponentUid:n}),t.type==="dynamiczone"&&d.jsx(Ri,{...t,disabled:w||t.status==="REMOVED",addComponent:o,forTarget:s.modelType,targetUid:s.uid})]})]})}),Mi=U(L)`
  display: ${({$shouldHideNestedInfos:e})=>e?"none":"block"};
  max-height: ${({$isOpen:e})=>e?"9999px":"0px"};
  overflow: hidden;

  transition: ${({$isOpen:e})=>e?"max-height 1s ease-in-out":"max-height 0.5s cubic-bezier(0, 1, 0, 1)"};
`,ji=({uid:e})=>{const{components:t}=be(),n=He(t,e);return d.jsxs(d.Fragment,{children:[" (",d.jsx(cn,{onClick:r=>r.stopPropagation(),tag:dn,to:`/plugins/content-type-builder/component-categories/${n.category}/${n.uid}`,children:At(n.info.displayName)}),")"]})},Yn=U(L)`
  height: 2.4rem;
  width: 2.4rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: 1rem;
    width: 1rem;
  }

  svg path {
    fill: ${({theme:e,color:t})=>e.colors[`${t}600`]};
  }
`,Wn=U(L)`
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
  display: block;
  width: 100%;
  border: none;
  position: relative;
`,Ai=({children:e,icon:t,color:n,...r})=>d.jsx(Wn,{paddingBottom:4,paddingTop:4,paddingLeft:"6rem",tag:"button",type:"button",...r,children:d.jsxs(P,{children:[d.jsx(Yn,{color:n,"aria-hidden":!0,background:`${n}200`,children:t}),d.jsx(L,{paddingLeft:3,children:d.jsx(ve,{variant:"pi",fontWeight:"bold",textColor:`${n}600`,children:e})})]})}),ki=({children:e,icon:t,color:n,...r})=>d.jsxs("div",{children:[d.jsx(sr,{}),d.jsx(Wn,{tag:"button",background:`${n}100`,padding:5,...r,children:d.jsxs(P,{children:[d.jsx(Yn,{color:n,"aria-hidden":!0,background:`${n}200`,children:t}),d.jsx(L,{paddingLeft:3,children:d.jsx(ve,{variant:"pi",fontWeight:"bold",textColor:`${n}600`,children:e})})]})})]}),Ii=U(L)`
  white-space: nowrap;
  list-style: none;
  list-style-type: none;
`,Oi=e=>{const{isInDevelopmentMode:t}=be(),{isDragging:n,attributes:r,listeners:o,setNodeRef:i,transform:s,transition:a,setActivatorNodeRef:l}=ui({disabled:!t||e.item.status==="REMOVED"||e.type.status==="REMOVED",id:e.item.id,data:{index:e.item.index}}),u={transform:me.Transform.toString({x:s?.x??0,y:s?.y??0,scaleX:1,scaleY:1}),transition:a};return d.jsx(Xn,{ref:i,handleRef:l,isDragging:n,attributes:r,listeners:o,style:u,...e})},Vn=({addComponentToDZ:e,firstLoopComponentUid:t,isFromDynamicZone:n=!1,isMain:r=!1,isSub:o=!1,secondLoopComponentUid:i,type:s})=>{const{formatMessage:a}=ke(),{trackUsage:l}=fn(),{isInDevelopmentMode:u,moveAttribute:g}=be(),{onOpenModalAddField:f}=kt(),p=s?.attributes.map((b,D)=>({id:`${s.uid}_${b.name}`,index:D,...b})),[h,w]=c.useState(null),v=s?.status==="REMOVED",m=kr(Ar(Ft));function C({active:b}){b&&w(b.id)}function S(b){const{active:D,over:x}=b;w(null),x&&D.id!==x.id&&g({forTarget:s.modelType,targetUid:s.uid,from:D.data.current.index,to:x.data.current.index})}const R=p.find(b=>b.id===h),y=()=>{v||(l("hasClickedCTBAddFieldBanner"),f({forTarget:s?.modelType,targetUid:s.uid}))};return s?.attributes.length===0&&r?d.jsx(ar,{action:d.jsx(at,{onClick:y,size:"L",startIcon:d.jsx(Xe,{}),variant:"secondary",children:a({id:X("table.button.no-fields"),defaultMessage:"Add new field"})}),content:a(s.modelType==="contentType"?{id:X("table.content.no-fields.collection-type"),defaultMessage:"Add your first field to this Collection-Type"}:{id:X("table.content.no-fields.component"),defaultMessage:"Add your first field to this component"}),hasRadius:!0,icon:d.jsx(lr,{width:"16rem"})}):d.jsxs(Io,{sensors:m,collisionDetection:Fr,onDragEnd:S,onDragStart:C,onDragCancel:()=>w(null),modifiers:[_o],children:[d.jsxs(Ii,{tag:"ul",children:[je.createPortal(d.jsx(Jo,{zIndex:10,children:R&&d.jsx(Xn,{isOverlay:!0,item:R,firstLoopComponentUid:t,isFromDynamicZone:n,secondLoopComponentUid:i,type:s,addComponentToDZ:e})}),document.body),d.jsx(oi,{items:p,strategy:ni,children:p.map(b=>d.jsx(Oi,{item:b,firstLoopComponentUid:t,isFromDynamicZone:n,secondLoopComponentUid:i,type:s,addComponentToDZ:e},b.id))})]}),r&&u&&d.jsx(ki,{cursor:v?"normal":"pointer",icon:d.jsx(Xe,{}),onClick:y,color:v?"neutral":"primary",children:a({id:X(`form.button.add.field.to.${s.modelType==="component"?"component":s.kind}`),defaultMessage:"Add another field"})}),o&&u&&d.jsx(Ai,{cursor:v?"normal":"pointer",icon:d.jsx(Xe,{}),onClick:y,color:n&&!v?"primary":"neutral",children:a({id:X("form.button.add.field.to.component"),defaultMessage:"Add another field"})})]})},Et={collectionTypesConfigurations:[{action:"plugin::content-manager.collection-types.configure-view",subject:null}],componentsConfigurations:[{action:"plugin::content-manager.components.configure-layout",subject:null}],singleTypesConfigurations:[{action:"plugin::content-manager.single-types.configure-view",subject:null}]},Ni=e=>e.modelType==="contentType"?e.kind==="singleType"?Et.singleTypesConfigurations:Et.collectionTypesConfigurations:Et.componentsConfigurations,$i=e=>{switch(e.modelType){case"contentType":switch(e.kind){case"singleType":return`/content-manager/single-types/${e.uid}/configurations/edit`;case"collectionType":return`/content-manager/collection-types/${e.uid}/configurations/edit`}case"component":return`/content-manager/components/${e.uid}/configurations/edit`}},Li=U(at)`
  white-space: nowrap;
`,Fi=c.memo(({disabled:e,type:t})=>{const{formatMessage:n}=ke(),r=cr(),o=Ni(t),i=n({id:"content-type-builder.form.button.configure-view",defaultMessage:"Configure the view"}),s=()=>{if(e)return!1;const u=$i(t);return r(u),!1},{isLoading:a,allowedActions:l}=dr(o);return a||!l.canConfigureView&&!l.canConfigureLayout?null:d.jsx(Li,{startIcon:d.jsx(ur,{}),variant:"tertiary",onClick:s,disabled:e,children:i})}),Pi=U(gn.Header)`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,qi=()=>{const{isInDevelopmentMode:e,contentTypes:t,components:n,isLoading:r}=be(),{formatMessage:o}=ke(),{trackUsage:i}=fn(),{contentTypeUid:s,componentUid:a}=fr(),{onOpenModalAddComponentsToDZ:l,onOpenModalAddField:u,onOpenModalEditSchema:g}=kt(),f=s?t[s]:a?n[a]:null;if(r)return null;if(!f){const D=Object.values(t).filter(x=>x.visible===!0&&!x.plugin).map(x=>x.uid).sort();return D.length>0?d.jsx(Kt,{to:`/plugins/content-type-builder/content-types/${D[0]}`}):d.jsx(Kt,{to:"/plugins/content-type-builder/content-types/create-content-type"})}const p="plugin"in f&&f?.plugin!==void 0,h=s?"contentType":"component",w=f?.info?.displayName??"",v=e&&!p,m=D=>{l({dynamicZoneTarget:D,targetUid:f.uid})},C=()=>{if("kind"in f){f?.kind==="collectionType"&&i("willEditNameOfContentType"),f?.kind==="singleType"&&i("willEditNameOfSingleType"),g({modalType:h,forTarget:h,targetUid:f.uid,kind:f?.kind});return}g({modalType:h,forTarget:h,targetUid:f.uid})},S=o({id:X("table.button.no-fields"),defaultMessage:"Add new field"}),R=o({id:X("button.attributes.add.another"),defaultMessage:"Add another field"}),y=f.status==="REMOVED",b=e&&d.jsxs(P,{gap:2,children:[d.jsx(Fi,{type:f,disabled:f.status==="NEW"||y},"link-to-cm-settings-view"),d.jsx(at,{startIcon:d.jsx(un,{}),variant:"tertiary",onClick:C,disabled:!v||y,children:o({id:"app.utils.edit",defaultMessage:"Edit"})}),d.jsx(at,{startIcon:d.jsx(Xe,{}),variant:"secondary",minWidth:"max-content",onClick:()=>{u({forTarget:h,targetUid:f.uid})},disabled:y,children:f.attributes.length===0?S:R})]});return d.jsxs(d.Fragment,{children:[y&&d.jsx(P,{background:"danger100",justifyContent:"center",padding:4,children:d.jsxs(P,{gap:2,children:[d.jsx(gr,{fill:"danger600",height:"2rem",width:"2rem"}),d.jsx(ve,{children:o({id:X("table.warning.deleted"),defaultMessage:"This {kind} has been deleted"},{kind:f.modelType==="contentType"?"Content Type":"Component"})})]})}),d.jsx(Pi,{id:"title",primaryAction:b,title:At(w)}),d.jsx(gn.Content,{children:d.jsx(L,{background:"neutral0",shadow:"filterShadow",hasRadius:!0,overflow:"auto",borderColor:"neutral150",children:d.jsx(Vn,{type:f,addComponentToDZ:m,isMain:!0})})})]})};export{qi as default};
